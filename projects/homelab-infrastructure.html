<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Homelab Infrastructure - Hiromtoon's Portfolio</title>
    <link rel="stylesheet" href="../css/style.css">
    <style>
        .project-detail {
            padding: 4rem 0;
            max-width: 900px;
            margin: 0 auto;
        }
        .back-link {
            color: var(--accent-primary);
            text-decoration: none;
            display: inline-block;
            margin-bottom: 2rem;
        }
        .back-link:hover {
            color: var(--accent-secondary);
        }
        .project-header {
            margin-bottom: 3rem;
        }
        .project-header h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            background: var(--accent-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .project-meta {
            display: flex;
            gap: 2rem;
            margin-bottom: 2rem;
        }
        .meta-item {
            color: var(--text-secondary);
        }
        .meta-label {
            font-weight: bold;
            color: var(--accent-primary);
        }
        .section {
            margin-bottom: 3rem;
        }
        .section h2 {
            font-size: 1.75rem;
            margin-bottom: 1.5rem;
            color: var(--text-primary);
        }
        .section p, .section li {
            color: var(--text-secondary);
            line-height: 1.8;
            margin-bottom: 1rem;
        }
        .section ul {
            margin-left: 1.5rem;
        }
        .architecture-diagram {
            background-color: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 1rem;
            padding: 2rem;
            margin: 2rem 0;
        }
        .architecture-diagram img {
            width: 100%;
            height: auto;
        }
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }
        .feature-card {
            background-color: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 0.5rem;
            padding: 1.5rem;
        }
        .feature-card h3 {
            color: var(--accent-primary);
            margin-bottom: 0.75rem;
        }
        .code-block {
            background-color: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 0.5rem;
            padding: 1.5rem;
            margin: 1rem 0;
            overflow-x: auto;
        }
        .code-block code {
            font-family: 'Courier New', monospace;
            color: var(--text-primary);
            font-size: 0.9rem;
        }
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin: 2rem 0;
        }
        .stat-box {
            background-color: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 0.5rem;
            padding: 1.5rem;
            text-align: center;
        }
        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--accent-primary);
            display: block;
        }
        .stat-label {
            color: var(--text-secondary);
            font-size: 0.875rem;
            margin-top: 0.5rem;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <nav class="container">
            <div class="logo">Hiromtoon</div>
            <ul class="nav-links">
                <li><a href="../index.html">Home</a></li>
                <li><a href="../index.html#projects">Projects</a></li>
                <li><a href="../index.html#contact">Contact</a></li>
            </ul>
        </nav>
    </header>

    <!-- Project Detail -->
    <main class="project-detail container">
        <a href="../index.html#projects" class="back-link">â† Back to Projects</a>

        <div class="project-header">
            <h1>ğŸ—ï¸ Homelab Kubernetes Infrastructure</h1>
            <p class="hero-subtitle">ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºãƒ¬ãƒ™ãƒ«ã®æœ¬æ ¼çš„ãªã‚ªãƒ³ãƒ—ãƒ¬ãƒŸã‚¹Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼</p>

            <div class="project-meta">
                <div class="meta-item">
                    <span class="meta-label">æœŸé–“:</span> 2024å¹´ã€œç¾åœ¨
                </div>
                <div class="meta-item">
                    <span class="meta-label">å½¹å‰²:</span> ã‚¤ãƒ³ãƒ•ãƒ©ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢
                </div>
                <div class="meta-item">
                    <span class="meta-label">ç’°å¢ƒ:</span> ã‚ªãƒ³ãƒ—ãƒ¬ãƒŸã‚¹
                </div>
            </div>

            <div class="tech-tags">
                <span class="tag">Kubernetes</span>
                <span class="tag">MicroK8s</span>
                <span class="tag">ArgoCD</span>
                <span class="tag">Harbor</span>
                <span class="tag">Ansible</span>
                <span class="tag">Prometheus</span>
                <span class="tag">Grafana</span>
                <span class="tag">GitOps</span>
            </div>
        </div>

        <!-- Stats -->
        <div class="stats">
            <div class="stat-box">
                <span class="stat-value">3</span>
                <span class="stat-label">ãƒãƒ¼ãƒ‰æ•°</span>
            </div>
            <div class="stat-box">
                <span class="stat-value">72GB</span>
                <span class="stat-label">ç·RAM</span>
            </div>
            <div class="stat-box">
                <span class="stat-value">24</span>
                <span class="stat-label">CPU ã‚³ã‚¢</span>
            </div>
            <div class="stat-box">
                <span class="stat-value">20+</span>
                <span class="stat-label">ãƒ‡ãƒ—ãƒ­ã‚¤æ¸ˆã¿ã‚µãƒ¼ãƒ“ã‚¹</span>
            </div>
        </div>

        <!-- Overview -->
        <section class="section">
            <h2>ğŸ“‹ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦</h2>
            <p>
                è‡ªå®…ã«ç‰©ç†ã‚µãƒ¼ãƒãƒ¼3å°ã‚’ä½¿ç”¨ã—ãŸé«˜å¯ç”¨æ€§Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã‚’æ§‹ç¯‰ã€‚GitOpsã«ã‚ˆã‚‹è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã€ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆã‚³ãƒ³ãƒ†ãƒŠãƒ¬ã‚¸ã‚¹ãƒˆãƒªã€åŒ…æ‹¬çš„ãªç›£è¦–ã‚·ã‚¹ãƒ†ãƒ ã‚’å‚™ãˆãŸã€ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºãƒ¬ãƒ™ãƒ«ã®ã‚¤ãƒ³ãƒ•ãƒ©ç’°å¢ƒã‚’å®Ÿç¾ã—ã¾ã—ãŸã€‚
            </p>
            <p>
                Infrastructure as Codeï¼ˆIaCï¼‰ã®åŸå‰‡ã«åŸºã¥ãã€Ansibleã«ã‚ˆã‚‹è‡ªå‹•åŒ–ã¨Gitã«ã‚ˆã‚‹ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã«ã‚ˆã‚Šã€å†ç¾å¯èƒ½ã§ä¿å®ˆæ€§ã®é«˜ã„ã‚¤ãƒ³ãƒ•ãƒ©ã‚’æ§‹ç¯‰ã—ã¦ã„ã¾ã™ã€‚
            </p>
        </section>

        <!-- Architecture -->
        <section class="section">
            <h2>ğŸ›ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£</h2>
            <div class="architecture-diagram">
                <img src="../images/architecture.svg" alt="Infrastructure Architecture Diagram">
            </div>
        </section>

        <!-- Cluster Configuration -->
        <section class="section">
            <h2>âš™ï¸ ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼æ§‹æˆ</h2>

            <div class="feature-grid">
                <div class="feature-card">
                    <h3>botan (Control Plane)</h3>
                    <p>ãƒã‚¹ã‚¿ãƒ¼ãƒãƒ¼ãƒ‰</p>
                    <ul>
                        <li>RAM: 24GB (82%ä½¿ç”¨)</li>
                        <li>CPU: 8ã‚³ã‚¢</li>
                        <li>ArgoCD</li>
                        <li>Prometheus</li>
                    </ul>
                </div>

                <div class="feature-card">
                    <h3>shakuyaku (Worker)</h3>
                    <p>ãƒ¯ãƒ¼ã‚«ãƒ¼ãƒãƒ¼ãƒ‰</p>
                    <ul>
                        <li>RAM: 24GB (64%ä½¿ç”¨)</li>
                        <li>CPU: 8ã‚³ã‚¢</li>
                        <li>Harbor Registry</li>
                        <li>OpenWebUI</li>
                    </ul>
                </div>

                <div class="feature-card">
                    <h3>yuri (Worker)</h3>
                    <p>ãƒ¯ãƒ¼ã‚«ãƒ¼ãƒãƒ¼ãƒ‰</p>
                    <ul>
                        <li>RAM: 24GB (68%ä½¿ç”¨)</li>
                        <li>CPU: 8ã‚³ã‚¢</li>
                        <li>JupyterLab</li>
                        <li>Harbor-trivy</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Key Features -->
        <section class="section">
            <h2>âœ¨ ä¸»è¦æ©Ÿèƒ½</h2>

            <h3>1. GitOps ã«ã‚ˆã‚‹è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ (ArgoCD)</h3>
            <p>
                Gitãƒªãƒã‚¸ãƒˆãƒªã‚’Single Source of Truthã¨ã—ã¦ã€Kubernetesãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã®å¤‰æ›´ã‚’è‡ªå‹•çš„ã«ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã«åæ˜ ã€‚å®£è¨€çš„ãªè¨­å®šç®¡ç†ã«ã‚ˆã‚Šã€ã‚¤ãƒ³ãƒ•ãƒ©ã®çŠ¶æ…‹ã‚’å¸¸ã«Gitã¨åŒæœŸã•ã›ã¦ã„ã¾ã™ã€‚
            </p>

            <h3>2. ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆã‚³ãƒ³ãƒ†ãƒŠãƒ¬ã‚¸ã‚¹ãƒˆãƒª (Harbor)</h3>
            <p>
                è‡ªç¤¾ãƒ“ãƒ«ãƒ‰ã®Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’å®‰å…¨ã«ç®¡ç†ã™ã‚‹ãŸã‚ã€Harborã‚’é‹ç”¨ã€‚è„†å¼±æ€§ã‚¹ã‚­ãƒ£ãƒ³ï¼ˆTrivyçµ±åˆï¼‰ã€ã‚¤ãƒ¡ãƒ¼ã‚¸ç½²åã€RBAC ã«ã‚ˆã‚‹è©³ç´°ãªã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ã‚’å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚
            </p>
            <div class="code-block">
                <code>
# Harbor ã¸ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ãƒ—ãƒƒã‚·ãƒ¥<br>
docker build -t 192.168.150.161/library/my-app:latest .<br>
docker push 192.168.150.161/library/my-app:latest<br>
<br>
# Kubernetes ã§ã®åˆ©ç”¨<br>
kubectl create secret docker-registry harbor-secret \<br>
&nbsp;&nbsp;--docker-server=192.168.150.161 \<br>
&nbsp;&nbsp;--docker-username=admin
                </code>
            </div>

            <h3>3. ã‚¤ãƒ³ãƒ•ãƒ©è‡ªå‹•åŒ– (Ansible)</h3>
            <p>
                ã‚µãƒ¼ãƒãƒ¼ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‹ã‚‰Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã®æ§‹ç¯‰ã¾ã§ã€ã™ã¹ã¦Ansibleã§è‡ªå‹•åŒ–ã€‚å†ªç­‰æ€§ã‚’æ‹…ä¿ã—ãŸãƒ—ãƒ¬ã‚¤ãƒ–ãƒƒã‚¯ã«ã‚ˆã‚Šã€å®‰å…¨ã‹ã¤å†ç¾å¯èƒ½ãªã‚¤ãƒ³ãƒ•ãƒ©æ§‹ç¯‰ã‚’å®Ÿç¾ã—ã¦ã„ã¾ã™ã€‚
            </p>
            <div class="code-block">
                <code>
# ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼å…¨ä½“ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—<br>
ansible-playbook -i hosts cluster-setup.yml --vault-password-file .vault_pass<br>
<br>
# ãƒãƒ¼ãƒ‰å€‹åˆ¥ã®ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹<br>
ansible-playbook -i hosts maintenances/kubernetes-update.yml
                </code>
            </div>

            <h3>4. åŒ…æ‹¬çš„ãªç›£è¦– (Prometheus + Grafana)</h3>
            <p>
                ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼å…¨ä½“ã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’Prometheusã§åé›†ã—ã€Grafanaã§å¯è¦–åŒ–ã€‚ãƒªã‚½ãƒ¼ã‚¹ä½¿ç”¨ç‡ã€PodçŠ¶æ…‹ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ãªã©ã€ã‚ã‚‰ã‚†ã‚‹æŒ‡æ¨™ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ç›£è¦–ã—ã¦ã„ã¾ã™ã€‚
            </p>
        </section>

        <!-- Technical Challenges -->
        <section class="section">
            <h2>ğŸ¯ æŠ€è¡“çš„ãƒãƒ£ãƒ¬ãƒ³ã‚¸</h2>

            <h3>ãƒªã‚½ãƒ¼ã‚¹æœ€é©åŒ–</h3>
            <p>
                é™ã‚‰ã‚ŒãŸç‰©ç†ãƒªã‚½ãƒ¼ã‚¹ï¼ˆå„ãƒãƒ¼ãƒ‰24GB RAMï¼‰ã®ä¸­ã§ã€20ä»¥ä¸Šã®ã‚µãƒ¼ãƒ“ã‚¹ã‚’å®‰å®šç¨¼åƒã•ã›ã‚‹ãŸã‚ã€Podé…ç½®ã®æœ€é©åŒ–ã‚’å®Ÿæ–½ã€‚Node Affinityã€Pod Anti-Affinityã€ãƒªã‚½ãƒ¼ã‚¹ãƒªã‚¯ã‚¨ã‚¹ãƒˆ/ãƒªãƒŸãƒƒãƒˆã‚’é§†ä½¿ã—ã€å„ãƒãƒ¼ãƒ‰ã®ä½¿ç”¨ç‡ã‚’80%ä»¥ä¸‹ã«æŠ‘åˆ¶ã—ãªãŒã‚‰æœ€å¤§é™ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’å®Ÿç¾ã—ã¾ã—ãŸã€‚
            </p>

            <h3>é«˜å¯ç”¨æ€§ã®å®Ÿç¾</h3>
            <p>
                3ãƒãƒ¼ãƒ‰æ§‹æˆã§HAã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã‚’æ§‹ç¯‰ã—ã€å˜ä¸€éšœå®³ç‚¹ã‚’æ’é™¤ã€‚etcdã®åˆ†æ•£é…ç½®ã€ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒ—ãƒ¬ãƒ¼ãƒ³ã®å†—é•·åŒ–ã«ã‚ˆã‚Šã€1ãƒãƒ¼ãƒ‰éšœå®³æ™‚ã§ã‚‚ã‚µãƒ¼ãƒ“ã‚¹ç¶™ç¶šå¯èƒ½ãªæ§‹æˆã‚’å®Ÿç¾ã—ã¦ã„ã¾ã™ã€‚
            </p>

            <h3>ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¼·åŒ–</h3>
            <p>
                Ansible Vaultã«ã‚ˆã‚‹æ©Ÿå¯†æƒ…å ±ã®æš—å·åŒ–ç®¡ç†ã€Kubernetesã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã®é©åˆ‡ãªé‹ç”¨ã€Harborã«ã‚ˆã‚‹ã‚¤ãƒ¡ãƒ¼ã‚¸è„†å¼±æ€§ã‚¹ã‚­ãƒ£ãƒ³ãªã©ã€å¤šå±¤çš„ãªã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¯¾ç­–ã‚’å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚
            </p>
        </section>

        <!-- Results -->
        <section class="section">
            <h2>ğŸ“Š æˆæœ</h2>
            <ul>
                <li><strong>ç¨¼åƒç‡99%ä»¥ä¸Š</strong>ã‚’é”æˆã—ã€å®‰å®šã—ãŸã‚µãƒ¼ãƒ“ã‚¹æä¾›ã‚’å®Ÿç¾</li>
                <li><strong>ãƒ‡ãƒ—ãƒ­ã‚¤æ™‚é–“ã‚’90%å‰Šæ¸›</strong>ï¼ˆæ‰‹å‹•ãƒ‡ãƒ—ãƒ­ã‚¤30åˆ† â†’ ArgoCDè‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤3åˆ†ï¼‰</li>
                <li><strong>20ä»¥ä¸Šã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³</strong>ã‚’å˜ä¸€ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ä¸Šã§åŠ¹ç‡çš„ã«é‹ç”¨</li>
                <li><strong>å®Œå…¨è‡ªå‹•åŒ–</strong>ã«ã‚ˆã‚Šã€æ–°è¦ã‚µãƒ¼ãƒ“ã‚¹è¿½åŠ æ™‚ã®ä½œæ¥­æ™‚é–“ã‚’å¤§å¹…å‰Šæ¸›</li>
                <li><strong>å†ç¾å¯èƒ½ãªã‚¤ãƒ³ãƒ•ãƒ©</strong>ã«ã‚ˆã‚Šã€ç½å®³å¾©æ—§æ™‚é–“ã‚’æœ€å°åŒ–</li>
            </ul>
        </section>

        <!-- Links -->
        <section class="section">
            <h2>ğŸ”— é–¢é€£ãƒªãƒ³ã‚¯</h2>
            <div class="hero-buttons">
                <a href="https://github.com/hiromtoon/homelab" class="btn btn-primary" target="_blank">
                    GitHub Repository
                </a>
            </div>
        </section>

        <a href="../index.html#projects" class="back-link">â† Back to Projects</a>
    </main>

    <!-- Footer -->
    <footer>
        <div class="container">
            <p>&copy; 2025 Hiromtoon. All rights reserved.</p>
        </div>
    </footer>
</body>
</html>
